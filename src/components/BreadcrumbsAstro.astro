---
import { siteConfig } from '../lib/config';

interface Props {
  category?: string;
  currentPage: string;
}

const { category, currentPage } = Astro.props;
const hubUrl = siteConfig.navigation.hubUrl;
---

<nav aria-label="Breadcrumb" class="breadcrumbs">
  <div class="container">
    <ol class="breadcrumb-list">
      <li>
        <a href="/" class="breadcrumb-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span class="sr-only md-visible">Home</span>
        </a>
      </li>
      <li class="separator">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
      </li>
      {category && (
        <>
          <li>
            <a href={hubUrl} class="breadcrumb-link">{category}</a>
          </li>
          <li class="separator">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </li>
        </>
      )}
      <li class="current-page">{currentPage}</li>
    </ol>
  </div>
</nav>

<style>
  .breadcrumbs { padding: 1rem 0; }
  .breadcrumb-list { display: flex; align-items: center; gap: 0.5rem; list-style: none; padding: 0; margin: 0; font-size: 0.875rem; color: hsl(var(--muted-foreground)); }
  .breadcrumb-link { display: flex; align-items: center; gap: 0.25rem; color: hsl(var(--muted-foreground)); transition: color 0.2s; }
  .breadcrumb-link:hover { color: hsl(var(--primary)); }
  .separator { display: flex; align-items: center; }
  .current-page { font-weight: 500; color: hsl(var(--foreground)); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
  @media (min-width: 768px) { .current-page { max-width: none; } }
  .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
  @media (min-width: 768px) { .md-visible { position: static; width: auto; height: auto; padding: 0; margin: 0; overflow: visible; clip: auto; white-space: normal; } }
</style>
