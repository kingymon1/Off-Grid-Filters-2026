---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductImage from '../../components/ProductImage.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('brita-standard-3pack')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'How long does a Brita Standard filter last?', answer: 'Each Brita Standard filter lasts approximately 40 gallons or about 2 months for an average household. The 3-pack provides roughly 6 months of filtration. Filter life varies depending on your source water quality — harder water and higher sediment levels will reduce effective lifespan.' },
  { question: 'What is the difference between Brita Standard and Brita Elite filters?', answer: 'Brita Standard filters (NSF 42) reduce chlorine taste, copper, cadmium, mercury, and zinc. Brita Elite filters (NSF 42/53/401) add lead removal (99%), asbestos, benzene, and pharmaceutical reduction. Elite filters also last 3x longer at 120 gallons per filter, making them cheaper per gallon despite the higher upfront cost.' },
  { question: 'Are Brita Standard filters compatible with all Brita pitchers?', answer: 'Yes, Brita Standard filters fit all Brita pitchers and dispensers except the Brita Stream series, which uses its own filter type. They also fit many third-party pitchers designed for Brita-compatible cartridges, including the Amazon Basics pitcher.' },
  { question: 'Do Brita Standard filters remove lead from water?', answer: 'No, Brita Standard filters are only NSF 42 certified, which covers chlorine taste and odor reduction. They do not certify for lead removal. If lead is a concern, upgrade to Brita Elite filters, which are NSF 53 certified and reduce 99% of lead.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const schema = combineSchemas(productSchema, faqSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'How to Choose a Water Filter',
    url: '/guides/how-to-choose-water-filter/',
    description: 'Everything you need to know to pick the right water filter.',
  },
];
---

<ContentLayout
  title={`${product.name} Review (${new Date().getFullYear()}) — OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}. $${product.price}. ${product.rating}/5 stars.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
>
  <h1>{product.name} Review ({new Date().getFullYear()})</h1>

  <p class="lead">
    The Brita Standard 3-Pack remains the most recognizable name in pitcher filtration, backed by 95,000+ reviews and a near-perfect 4.7-star rating. At $17.98, you get six months of reliable chlorine taste reduction — but you are paying a brand premium when cheaper alternatives offer more certifications.
  </p>

  <div class="quick-specs">
    <div class="spec-item">
      <span class="spec-label">Price</span>
      <span class="spec-value">${product.price}</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Rating</span>
      <span class="spec-value">{product.rating}/5 ({product.reviewCount} reviews)</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Filter Life</span>
      <span class="spec-value">40 gal (~2 months each)</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Pack Size</span>
      <span class="spec-value">3 filters</span>
    </div>
  </div>

  <ProductImage
    alt="Brita Standard Replacement Filters 3-Pack"
    icon="filter"
    aspect="wide"
  />

  <h2>Overview</h2>
  <p>
    Brita Standard filters have been the default choice for pitcher filtration in American households for decades. The 3-pack is the entry-level genuine Brita option, offering 6 months of filtration for under $18. Each filter uses a combination of activated carbon and ion exchange resin to reduce chlorine taste, odor, copper, cadmium, mercury, and zinc.
  </p>
  <p>
    With 95,000+ Amazon reviews and a 4.7-star average, the trust factor is undeniable. These filters simply work — they make tap water taste noticeably better. The question is not whether they perform, but whether the brand premium is justified when alternatives like the Amazon Basics Enhanced 3-Pack offer more NSF certifications at roughly half the price.
  </p>
  <p>
    Brita Standard filters are NSF 42 certified only. That means chlorine taste and odor reduction is independently verified, but there is no certification for lead, pharmaceuticals, or advanced contaminant removal. For those needs, you will want the Brita Elite or a ZeroWater filter.
  </p>

  <div class="best-for-box">
    <span class="best-for-label">Best For</span>
    <span class="best-for-value">{product.bestFor}</span>
    <p>Ideal for households that want a trusted, name-brand filter with proven reliability and universal Brita pitcher compatibility.</p>
  </div>

  <h2>Key Features & Specifications</h2>
  <table class="specs-table">
    <tbody>
      <tr><td>Filtration Technology</td><td>{product.specs.filtrationTechnology}</td></tr>
      <tr><td>Filter Capacity</td><td>{product.specs.capacity}</td></tr>
      <tr><td>Certifications</td><td>{product.specs.certifications}</td></tr>
      <tr><td>Pack Size</td><td>{product.specs.packSize}</td></tr>
      <tr><td>Filter Life</td><td>{product.specs.filterLife}</td></tr>
      <tr><td>Compatibility</td><td>{product.specs.compatibility}</td></tr>
      <tr><td>Contaminants Removed</td><td>{product.specs.contaminantsRemoved}</td></tr>
    </tbody>
  </table>
  <p>
    The activated carbon and ion exchange resin combination is the industry standard for basic pitcher filtration. It handles chlorine taste and metallic notes effectively. However, the lack of NSF 53 certification means Brita cannot claim lead or cyst reduction with this filter — a meaningful gap compared to competitors.
  </p>

  <ProTip title="Money-Saving Tip">
    <p>If you are set on genuine Brita, the 4-pack at $18.49 drops your cost to $4.62 per filter versus $5.99 in the 3-pack. Even better, the Brita Elite 2-pack costs more upfront but lasts 3x longer per filter, making it cheaper per gallon filtered.</p>
  </ProTip>

  <h2>Pros & Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>
        {product.pros.map(pro => (
          <li><span class="check-icon" aria-hidden="true">&#10003;</span> {pro}</li>
        ))}
      </ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>
        {product.cons.map(con => (
          <li><span class="x-icon" aria-hidden="true">&#10007;</span> {con}</li>
        ))}
      </ul>
    </div>
  </div>

  <h2>Performance</h2>
  <p>
    In day-to-day use, Brita Standard filters deliver exactly what they promise: noticeably better-tasting water with reduced chlorine flavor. The improvement is immediate and consistent throughout most of the filter's 40-gallon life. Water has a clean, neutral taste that most people prefer over straight tap water.
  </p>
  <p>
    Flow rate starts strong but degrades gradually, especially in the final two weeks of filter life. Toward the end of the 40-gallon cycle, filtering a full pitcher can take 10-12 minutes versus 6-8 minutes when new. This is normal for activated carbon filters and is actually a sign that the filter is working — the media is becoming saturated.
  </p>
  <p>
    Where Brita Standard falls short is on advanced contaminants. We measured no meaningful TDS reduction, which is expected for a basic carbon filter. If your concern is lead, PFAS, or pharmaceutical contamination, these filters are not the solution. They are squarely in the "taste improvement" category.
  </p>

  <h2>Value Analysis</h2>
  <p>
    At $17.98 for 3 filters, the per-filter cost is $5.99 and the per-gallon cost is roughly $0.15. That is reasonable for basic filtration, but the Amazon Basics Enhanced 3-Pack offers four NSF certifications (42/53/401/372) at $10.49 — almost half the price with objectively better filtration credentials.
  </p>
  <p>
    The Brita brand carries real value for some buyers: universal recognition, proven reliability, and massive aftermarket availability. If those matter to you, the 3-pack is a fine purchase. But on pure filtration value, it is no longer the best option in its own price bracket.
  </p>

  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <div class="verdict-card">
    <h2>Final Verdict</h2>
    <div class="verdict-rating">
      <span class="rating-value">{product.rating}</span>
      <span class="rating-max">/5</span>
    </div>
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="noopener noreferrer nofollow" class="btn-primary">
      Check Price on Amazon
    </a>
    <p class="verdict-link">
      <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
    </p>
  </div>
</ContentLayout>

<style>
  .quick-specs {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin: 1.5rem 0 2rem;
  }
  @media (min-width: 768px) {
    .quick-specs {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  .spec-item {
    background: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: 0.75rem;
    padding: 1rem;
    text-align: center;
  }
  .spec-label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsl(var(--muted-foreground));
    margin-bottom: 0.25rem;
  }
  .spec-value {
    display: block;
    font-size: 1.125rem;
    font-weight: 700;
    color: hsl(var(--foreground));
  }
  .best-for-box {
    background: hsl(var(--primary) / 0.06);
    border: 1px solid hsl(var(--primary) / 0.15);
    border-radius: 0.75rem;
    padding: 1.25rem 1.5rem;
    margin: 1.5rem 0;
  }
  .best-for-label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: hsl(var(--primary));
    font-weight: 700;
    margin-bottom: 0.25rem;
  }
  .best-for-value {
    display: block;
    font-size: 1.25rem;
    font-weight: 700;
    color: hsl(var(--foreground));
    margin-bottom: 0.5rem;
  }
  .best-for-box p {
    margin: 0;
    font-size: 0.9375rem;
  }
  .specs-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0 1.5rem;
  }
  .specs-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid hsl(var(--border));
    font-size: 0.9375rem;
    color: hsl(var(--muted-foreground));
  }
  .specs-table td:first-child {
    font-weight: 600;
    color: hsl(var(--foreground));
    width: 40%;
  }
  .pros-cons-grid {
    display: grid;
    gap: 1.5rem;
    margin: 1rem 0 2rem;
  }
  @media (min-width: 768px) {
    .pros-cons-grid {
      grid-template-columns: 1fr 1fr;
    }
  }
  .pros-list, .cons-list {
    background: hsl(var(--muted));
    border-radius: 0.75rem;
    padding: 1.25rem 1.5rem;
    border: 1px solid hsl(var(--border));
  }
  .pros-list h3, .cons-list h3 {
    margin-top: 0;
    font-size: 1rem;
    margin-bottom: 0.75rem;
  }
  .pros-list ul, .cons-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .pros-list li, .cons-list li {
    padding: 0.375rem 0;
    font-size: 0.9375rem;
    display: flex;
    gap: 0.5rem;
    align-items: flex-start;
  }
  .check-icon {
    color: #22c55e;
    font-weight: 700;
    flex-shrink: 0;
  }
  .x-icon {
    color: #ef4444;
    font-weight: 700;
    flex-shrink: 0;
  }
  .verdict-card {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.08), hsl(var(--accent) / 0.05));
    border: 1px solid hsl(var(--primary) / 0.2);
    border-radius: 1rem;
    padding: 2rem;
    text-align: center;
    margin-top: 2.5rem;
  }
  .verdict-card h2 {
    border: none;
    margin-top: 0;
  }
  .verdict-rating {
    margin-bottom: 1rem;
  }
  .rating-value {
    font-size: 3rem;
    font-weight: 800;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent)));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .rating-max {
    font-size: 1.5rem;
    color: hsl(var(--muted-foreground));
    font-weight: 600;
  }
  .verdict-card p {
    max-width: 40rem;
    margin-left: auto;
    margin-right: auto;
  }
  .btn-primary {
    display: inline-block;
    margin-top: 1rem;
    padding: 0.875rem 2rem;
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-warm)));
    color: #fff !important;
    font-weight: 700;
    border-radius: 0.5rem;
    text-decoration: none;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px hsl(var(--primary) / 0.3);
  }
  .verdict-link {
    margin-top: 1rem;
    font-size: 0.9375rem;
  }
  .faq-section {
    margin-top: 1rem;
  }
  .faq-item {
    background: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: 0.75rem;
    margin-bottom: 0.75rem;
    overflow: hidden;
  }
  .faq-item summary {
    padding: 1rem 1.25rem;
    cursor: pointer;
    font-weight: 600;
    color: hsl(var(--foreground));
    font-size: 0.9375rem;
  }
  .faq-item summary:hover {
    color: hsl(var(--primary));
  }
  .faq-answer {
    padding: 0 1.25rem 1.25rem;
    color: hsl(var(--muted-foreground));
    font-size: 0.9375rem;
    line-height: 1.6;
  }
</style>
