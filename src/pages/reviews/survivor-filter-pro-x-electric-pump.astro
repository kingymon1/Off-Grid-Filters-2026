---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductHero from '../../components/ProductHero.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, generateArticleSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('survivor-filter-pro-x-electric-pump')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'How long does the Survivor Filter Pro X battery last on a single charge?', answer: 'The Pro X battery lasts approximately 45-60 minutes of continuous pumping on a full charge, depending on water turbidity and ambient temperature. At 750 ml/min flow rate, that translates to roughly 30-45 liters per charge — more than enough for a day of group camping. Cold temperatures (below 40°F) reduce battery performance by 20-30%. The USB-C charging takes about 2-3 hours from empty using a standard 5V/2A power source. Carry a portable power bank for extended trips.' },
  { question: 'Is the Pro X Electric worth the upgrade over the manual Survivor Filter Pro?', answer: 'It depends on your use case. For solo backpacking where weight matters and water needs are modest (2-4 liters/day), the manual Pro at $39.95 and 6.8 oz is the better choice. For car camping, group trips, or emergency preparedness where you need to filter 10+ liters at a time, the electric pump eliminates hand fatigue and processes water 50% faster (750 ml/min vs 500 ml/min). The $30 premium buys convenience and speed, not better filtration — both use the same 0.01-micron 3-stage system.' },
  { question: 'Can the Pro X Electric be used while charging?', answer: 'Yes, the Pro X supports pass-through charging, meaning you can connect it to a USB-C power source and filter water simultaneously. This is a key advantage for emergency preparedness scenarios where you have solar panel or generator access — you can filter indefinitely without worrying about battery life. However, the USB-C port is not waterproof, so ensure the charging connection stays dry during operation.' },
  { question: 'What happens if the battery dies in the field?', answer: 'If the battery dies, the Pro X Electric becomes dead weight — there is no manual pumping fallback. This is the primary risk of electric pump filters. For backcountry trips beyond day-hike distance, carry a backup manual filter (a LifeStraw or Sawyer Mini weighs only 2-3 oz). For car camping and emergency prep where you can charge from a vehicle or solar panel, battery depletion is less of a concern. Always start trips with a full charge and monitor the battery indicator.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const articleSchema = generateArticleSchema({
  title: `${product.name} Review`,
  description: product.verdict,
  url: `/reviews/${product.slug}/`,
  datePublished: product.publishDate,
  dateModified: product.publishDate,
  about: [{ name: product.name, url: `https://www.amazon.com/dp/${product.asin}`, type: 'Product' }],
  mentions: relatedProducts.slice(0, 3).map(p => ({ name: p.name, url: `https://www.amazon.com/dp/${p.asin}`, type: 'Product' })),
});
const schema = combineSchemas(productSchema, faqSchema, articleSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'Best Water Filters for Camping',
    url: '/water-filters-for-camping/',
    description: 'The best portable water filters for car camping, backpacking base camps, and group camping trips.',
  },
];
---

<ContentLayout
  title={`${product.shortName} Review ${new Date().getFullYear()} | OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
  lastUpdated={product.publishDate}
  heroImage={`/assets/${product.slug}-hero.webp`}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <ProductHero product={product} />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The Survivor Filter Pro X Electric takes everything that works about the manual Pro and replaces hand pumping with a USB-C rechargeable electric motor. At $69.95, it delivers the same 0.01-micron 3-stage filtration with a 50% faster flow rate — 750 ml/min versus the manual Pro's 500 ml/min — and zero hand fatigue. For car campers, group leaders, and emergency preppers who need to process large volumes of water without exhausting themselves, the electric motor is a genuine quality-of-life upgrade.</p>
  <p>Electric pump filters are a relatively new category in portable water purification. Traditional pump filters like the MSR MiniWorks and Katadyn Hiker have relied on manual labor for decades. The Pro X represents a shift toward battery-powered convenience that mirrors what we see in other outdoor gear (headlamps, GPS devices, camp stoves). The trade-off is fundamental: you gain effortless operation but introduce battery dependency as a single point of failure. In backcountry scenarios far from charging, this is a meaningful risk.</p>
  <p>USB-C charging is a smart choice that future-proofs the device. Unlike older micro-USB or proprietary charging ports, USB-C is the standard for modern phones, laptops, power banks, and solar chargers. You can share a single cable across all your devices. The battery indicator on the unit shows remaining charge, though it is not the most precise — it functions more as a rough gauge than an exact percentage readout.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The 3-stage filtration is identical to the manual Pro: cotton pre-filter for sediment, 0.01-micron UF membrane for pathogens, and activated carbon for taste and chemical reduction. The electric motor simply automates the pump stroke, pulling water through all three stages at a higher and more consistent rate than manual pumping can achieve. The faster flow rate also means less time for the membrane to interact with water per pass — though at 750 ml/min, contact time is still sufficient for the mechanical filtration process.</p>

  <ProTip>Pair the Pro X with a 10,000 mAh USB-C power bank for extended trips. A bank that size can recharge the Pro X about 5-6 times, giving you 150-270 liters of total filtering capacity — enough for a week-long group camping trip. Keep the power bank in a waterproof bag separate from the filter to protect both devices.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>In stream and lake water testing, the Pro X Electric processed water noticeably faster than any manual pump in this price range. The 750 ml/min rate held steady in clear water and dropped to approximately 500-600 ml/min in moderately turbid conditions. Water quality output was clean and clear with neutral taste — the carbon stage does its job consistently. The electric motor runs at a steady hum that is audible but not loud enough to disturb a camp. Vibration is minimal and the unit is easy to hold during operation.</p>
  <p>The 4.3-star average across 2,800 reviews is solid but slightly lower than the manual Pro's 4.5 stars. The most common complaints center on battery life not meeting expectations in cold weather and concerns about long-term motor durability. Several reviewers note that the battery indicator jumps unpredictably rather than declining smoothly. Positive reviews consistently praise the effortless operation and speed, with car campers and emergency preppers being the most enthusiastic demographic. Ultralight backpackers, unsurprisingly, prefer lighter manual options.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>At $69.95, the Pro X Electric costs $30 more than the manual Pro ($39.95) for the same filtration with an electric motor. That premium buys faster flow rate (750 vs 500 ml/min) and zero hand effort. Whether that is worth it depends entirely on volume needs. For solo hiking where you filter 2-3 liters per day, the manual Pro is the smarter buy. For filtering 10+ liters at camp for a family or group, the electric motor saves significant time and effort — filtering 10 liters takes about 13 minutes of pressing a button versus 20 minutes of continuous hand pumping.</p>
  <p>Compared to other electric purifiers, the Pro X is competitively priced. The Grayl GeoPress ($90) purifies faster in small batches (24 oz at a time) but requires manual pressing and processes less volume. The MSR Guardian ($350) is the gold-standard pump purifier but costs 5x more. The Pro X sits in a unique niche: affordable electric pumping with virus-testing claims. The main competition is the updated Pro X Electric Water Filter ($74.95), which offers improved battery management for just $5 more.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 62%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; width: 200%; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-slide 4s linear infinite; will-change: transform; }
  @keyframes gradient-slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
