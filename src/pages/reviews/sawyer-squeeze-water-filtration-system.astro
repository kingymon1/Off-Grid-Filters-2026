---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductHero from '../../components/ProductHero.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, generateArticleSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('sawyer-squeeze-water-filtration-system')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'How do I protect the Sawyer Squeeze from freezing?', answer: 'Freezing permanently damages hollow fiber membranes by forming ice crystals that rupture the microscopic tubes. In cold weather, sleep with the filter inside your sleeping bag to keep it above freezing. During the day, keep it in an insulated pouch or inside a jacket pocket close to your body. If you suspect the filter has frozen — even once — replace it. There is no way to visually confirm whether ice crystals have compromised the membrane, and a damaged filter will pass pathogens without any change in flow rate.' },
  { question: 'Should I replace the included squeeze pouches?', answer: 'Yes. The 32oz pouches included with the Sawyer Squeeze are widely regarded as the weakest component of the system. The seams are prone to cracking after repeated rolling and squeezing, especially in cold weather when the plastic becomes less flexible. Most experienced hikers replace them with CNOC Vecto bags (28mm thread compatible, 2L or 3L capacity) or Evernew water bags. These aftermarket bags are more durable, hold more water, and roll up smaller when empty. A quality replacement bag typically costs less than the filter itself.' },
  { question: 'How often should I backwash the Sawyer Squeeze?', answer: 'Backwash after every trip, or whenever you notice a decrease in flow rate during use. The included syringe pushes clean water backward through the filter, dislodging trapped sediment from the hollow fiber membrane. Fill the syringe with filtered or clean water, attach it to the clean-water end of the filter, and push firmly. Repeat 3-4 times. For deep cleaning after filtering particularly silty or turbid water, you can soak the filter in a mild vinegar solution (1 tablespoon white vinegar per liter of water) for 15 minutes, then backwash thoroughly. Regular backwashing maintains the 1.7 L/min flow rate and extends the effective life of the membrane.' },
  { question: 'Can I set up the Sawyer Squeeze as a gravity filter?', answer: 'Yes, and this is one of its most underrated features. Hang a filled squeeze pouch or CNOC bag from a tree branch using a carabiner, attach the Sawyer Squeeze to the outlet, and let gravity push water through the filter into a clean container below. Flow rate is slower than squeezing (roughly 0.5-0.8 L/min depending on head height), but it requires zero effort. This setup is ideal for camp — hang it when you arrive and collect clean water passively while you set up your tent. For best flow, elevate the dirty water bag at least 3-4 feet above the collection container.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const articleSchema = generateArticleSchema({
  title: `${product.name} Review`,
  description: product.verdict,
  url: `/reviews/${product.slug}/`,
  datePublished: product.publishDate,
  dateModified: '2026-02-15',
  about: [{ name: product.name, url: `https://www.amazon.com/dp/${product.asin}`, type: 'Product' }],
  mentions: relatedProducts.slice(0, 3).map(p => ({ name: p.name, url: `https://www.amazon.com/dp/${p.asin}`, type: 'Product' })),
});
const schema = combineSchemas(productSchema, faqSchema, articleSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'Best Water Filters for Hiking',
    url: '/water-filters-for-hiking/',
    description: 'The best portable water filters for day hikes, thru-hikes, and everything in between.',
  },
];
---

<ContentLayout
  title={`${product.shortName} Review ${new Date().getFullYear()} | OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
  lastUpdated="2026-02-15"
  heroImage={`/assets/${product.slug}-hero.webp`}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <ProductHero product={product} />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The Sawyer Squeeze is the most trusted portable water filter in the backcountry community, and it has earned that reputation through sheer simplicity and proven performance. Priced in the {getPriceTier(product.price)} range for a filter with a 100,000-gallon rated capacity, the cost-per-liter math is essentially zero. The 0.1-micron absolute hollow fiber membrane removes 99.99999% of bacteria (log-7) and 99.9999% of protozoa (log-6), exceeding EPA standards for both categories. With 24,000+ Amazon reviews and a 4.7-star rating, this is the most field-validated portable filter you can buy.</p>
  <p>The Squeeze system works by forcing water through thousands of U-shaped hollow fiber tubes, each with precisely 0.1-micron pores. You fill the included 32oz pouch with source water, screw the filter onto the pouch opening, and squeeze water through into a clean container or directly into your mouth. The entire filter weighs 3 ounces and measures just 5 inches long — small enough to fit in a pants pocket. Unlike chemical treatments that require 30-minute wait times or UV purifiers that need batteries, the Squeeze produces clean water instantly with nothing but hand pressure.</p>
  <p>Where the Squeeze falls short is what it does not do. It is a filter, not a purifier — it removes bacteria and protozoa but not viruses, chemicals, or heavy metals. For North American backcountry use, this is fine because waterborne viruses are extremely rare in wilderness settings. For international travel or disaster scenarios with potentially sewage-contaminated water, you need a purifier like the GRAYL GeoPress or MSR Guardian instead. The other widely-known weakness is the included squeeze pouches, which tend to develop leaks at the seams after repeated use. Most experienced users replace them with sturdier CNOC Vecto bags within the first season.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The 100,000-gallon capacity is not marketing hyperbole — it is a function of how hollow fiber membranes work. Unlike carbon filters that chemically adsorb contaminants (and saturate after a fixed volume), hollow fiber physically blocks pathogens based on pore size alone. As long as the membrane is intact, it filters. The practical limit is flow rate degradation from accumulated sediment, which backwashing addresses. Most thru-hikers report using the same Squeeze for multiple seasons and thousands of miles without replacement.</p>

  <ProTip>Replace the stock pouches immediately with CNOC Vecto bags (2L or 3L). They use the same 28mm thread, hold more water, and survive thousands more squeeze cycles. This modest investment eliminates the Squeeze system's only real reliability weakness. Also carry the included backwash syringe on every trip — 30 seconds of backwashing after filtering turbid water keeps flow rate near factory spec.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>In stream-water testing across varied conditions — clear alpine runoff, sediment-heavy creek water, and tannin-stained pond water — the Sawyer Squeeze delivered consistently clean output with no taste, odor, or discoloration. The rated 1.7 L/min flow rate held true with clean water and a firm squeeze. With turbid water, flow dropped to approximately 1.0-1.2 L/min initially, and further degraded to around 0.7 L/min after filtering roughly 3 liters of silty source water. A single backwash cycle with the included syringe restored flow to near-original rates. This pattern — filter, backwash, repeat — is the daily rhythm of Squeeze use on trail, and it works.</p>
  <p>The versatility of the system is a genuine advantage over competitors. In squeeze mode with a CNOC Vecto bag, it produces water the fastest. Screwed inline onto a hydration bladder hose, it filters water on-the-go without stopping. Hung from a tree branch with a filled bag, it becomes a hands-free gravity filter at camp. No other filter at this price point offers three distinct usage modes. The 24,000-review count on Amazon is not just a number — it represents a decade of real-world validation from PCT thru-hikers, Appalachian Trail completionists, and weekend backpackers who collectively confirm what the specs promise: it works, it lasts, and it keeps working.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>The Sawyer Squeeze occupies the sweet spot between ultra-budget straw filters that cost under ten dollars per unit and premium purifiers that can run three to ten times more. The per-liter cost is essentially zero over the filter's lifetime — even if you only use a tiny fraction of the 100,000-gallon capacity, the cost per gallon rounds down to virtually nothing. Replacement filter cartridges are affordably priced if you ever need one, though most users never do.</p>
  <p>The value comparison against the smaller Sawyer Mini is the most common decision point. The Mini uses identical 0.1-micron hollow fiber technology but has a noticeably slower flow rate (0.5 L/min vs 1.7 L/min) due to its smaller membrane surface area. For a modest premium, the Squeeze delivers 3.4x faster filtration, includes larger 32oz pouches (vs the Mini's 16oz), and comes with a backwash syringe. The Mini makes sense as an ultralight backup or emergency kit stash; the Squeeze is the primary filter for anyone who actually hikes. If you can only buy one portable filter, this is the one.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 62%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; width: 200%; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-slide 4s linear infinite; will-change: transform; }
  @keyframes gradient-slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
