---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductHero from '../../components/ProductHero.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, generateArticleSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('hydroblu-go-flow-water-gravity-bag')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');
const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);
const faqs = [
  { question: 'Can the HydroBlu Go Flow be used as a squeeze filter?', answer: 'Yes. The Go Flow is designed for dual operation: hang it from a tree branch or hook for hands-free gravity filtration, or hold the bag and squeeze it by hand for faster output. Squeeze mode delivers higher flow rates (approximately 1.5 L/min) than gravity mode (1-1.5 L/min) but requires continuous physical effort. The bag material is flexible enough for comfortable squeezing, though it is thinner than premium alternatives like the CNOC Vecto.' },
  { question: 'How does the HydroBlu Go Flow compare to the Platypus GravityWorks?', answer: 'The Platypus GravityWorks 4L ($74.95) is a complete gravity system with separate dirty and clean reservoirs, inline hoses, and a shutoff valve. The HydroBlu Go Flow ($24.95) is a single dirty bag with an integrated filter — no clean reservoir, no hoses. The GravityWorks filters faster (1.75 L/min vs 1-1.5 L/min), holds more water (4L vs 3L), and eliminates cross-contamination risk with its dual-bag design. The Go Flow costs a third of the price and weighs half as much, making it the budget choice for solo use where the GravityWorks is overkill.' },
  { question: 'How do I clean the HydroBlu Go Flow filter?', answer: 'Fill the bag with clean filtered water and squeeze it backward through the filter outlet to backflush the hollow fiber membrane. This dislodges trapped sediment and restores flow rate. In the field, you can also swish clean water vigorously through the bag to agitate and rinse the membrane. Backflush every 50-100 liters in turbid water conditions, or whenever flow rate drops noticeably. Never let the filter freeze with water inside — ice crystals rupture hollow fiber membranes.' },
  { question: 'Is 3 liters enough capacity for the Go Flow?', answer: 'For solo camping and hiking, 3 liters is sufficient for most scenarios — it covers drinking water for several hours plus cooking. For groups of 2-3 people, you will need to refill and filter multiple times per day, which adds 5-10 minutes per cycle. For groups of 4 or more, a larger system like the Platypus GravityWorks 4L or the MSR AutoFlow XL (10L) is more practical. The Go Flow is best suited as a solo or duo filter where its light weight and low cost outweigh the capacity limitation.' },
];
const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const articleSchema = generateArticleSchema({
  title: `${product.name} Review`, description: product.verdict,
  url: `/reviews/${product.slug}/`, datePublished: product.publishDate, dateModified: product.publishDate,
  about: [{ name: product.name, url: `https://www.amazon.com/dp/${product.asin}`, type: 'Product' }],
  mentions: relatedProducts.slice(0, 3).map(p => ({ name: p.name, url: `https://www.amazon.com/dp/${p.asin}`, type: 'Product' })),
});
const schema = combineSchemas(productSchema, faqSchema, articleSchema);
const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({ title: `${p.name} Review`, url: `/reviews/${p.slug}/`, description: p.verdict })),
  ...(category ? [{ title: `Best ${category.name}`, url: `/best-${category.slug}/`, description: category.description }] : []),
  { title: 'Best Water Filters for Camping', url: '/water-filters-for-camping/', description: 'The best portable water filters for car camping, backpacking base camps, and group camping trips.' },
];
---

<ContentLayout
  title={`${product.shortName} Review ${new Date().getFullYear()} | OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
  lastUpdated={product.publishDate}
  heroImage={`/assets/${product.slug}-hero.webp`}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <ProductHero product={product} />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The HydroBlu Go Flow brings gravity filtration to the budget market. At $24.95, it costs roughly a third of the Platypus GravityWorks 4L ($74.95) and a quarter of the MSR AutoFlow XL ($99.95), making it the most affordable hands-free water filtration system we have tested. The concept is straightforward: fill the 3-liter bag with source water, hang it from a branch or hook, and let gravity push water through the integrated 0.1-micron hollow fiber filter. Clean water drips out the bottom while you set up camp, cook, or rest — no pumping, squeezing, or sipping required.</p>
  <p>The dual-use design adds practical versatility. Beyond gravity mode, you can hold the filled bag and squeeze it by hand for faster output — effectively turning it into a squeeze filter when you need water quickly. This makes the Go Flow more adaptable than dedicated gravity-only systems. The 0.1-micron hollow fiber membrane provides the same reliable bacteria (99.9999%) and protozoa (99.99%) removal found in filters costing three to four times more. The filtration technology is proven and well-understood — HydroBlu simply packaged it into a lighter, cheaper, and more portable form.</p>
  <p>Where the Go Flow makes compromises is in durability and capacity. The 3-liter bag uses thinner material than the Platypus or MSR bags, which raises concerns about puncture resistance during rough backcountry use. The 3L capacity is adequate for solo or duo camping but requires frequent refills for larger groups. And unlike the Platypus GravityWorks, there is no separate clean reservoir — you collect filtered water in your own container below the hanging bag. These are reasonable trade-offs for a filter that weighs just 5 ounces and fits in a shirt pocket when dry.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The 100,000-gallon filter life is the standout specification. At the standard filtration rates, you would need to filter over 378,000 liters to exhaust the membrane — far more water than any individual would process in a lifetime of recreational use. In practice, sediment accumulation will reduce flow rate long before the membrane itself wears out. Regular backflushing extends usable life significantly. The 1-1.5 L/min gravity flow rate means a full 3-liter bag filters in approximately 2-3 minutes, which is fast enough for solo use but noticeably slower than the Platypus GravityWorks' 1.75 L/min.</p>

  <ProTip>Maximize gravity flow rate by hanging the bag as high as possible — the greater the head height, the more water pressure pushes through the filter. A carabiner on a tree branch at chest height works, but shoulder height or above delivers noticeably faster flow. If no hanging point is available, hold the bag above your clean container and squeeze gently. Also, pre-filter visibly turbid water through a bandana before filling the bag to prevent rapid membrane clogging.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>In gravity mode, the Go Flow delivered consistent flow at approximately 1-1.2 liters per minute when hung from a branch at shoulder height. Water came through clear and free of visible particulates from a mildly turbid creek source. The bag filled easily from a wide opening at the top, and the screw-cap seal was secure enough to prevent leakage when inverted for hanging. In squeeze mode, flow rate increased to approximately 1.5 L/min with firm hand pressure — a noticeable improvement over gravity-only operation. The bag material flexed well for squeezing without feeling like it was about to burst.</p>
  <p>The 4.1-star rating across 1,500 Amazon reviews is the lowest of the HydroBlu lineup, with durability being the primary criticism. Several reviewers report the bag developing pinhole leaks after 10-20 uses, particularly along the seam lines. This appears to be a batch-variability issue rather than a fundamental design flaw, but it is a real concern for multi-week trips where a bag failure leaves you without a gravity option. The filter element itself receives universally positive feedback — the hollow fiber membrane performs as advertised. For weekend camping and short backpacking trips, the Go Flow is reliable. For thru-hikes or extended wilderness trips, the Platypus GravityWorks' thicker bags provide more peace of mind.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>The Go Flow's value proposition is simple: gravity filtration at a fraction of the competition's price. At $24.95, it costs less than one-third of the Platypus GravityWorks 4L ($74.95) and one-quarter of the MSR AutoFlow XL ($99.95). The weight savings are equally dramatic — 5 ounces for the Go Flow versus 11.5 ounces for the GravityWorks and 10.8 ounces for the MSR. For ultralight backpackers and budget-conscious hikers who want hands-free filtration without the premium price tag, nothing else comes close.</p>
  <p>The trade-off calculation depends on your use case. For solo weekend camping where you need 3-6 liters of water per day, the Go Flow handles the job efficiently at minimal weight and cost. For group camping or multi-week expeditions where you need to process 10+ liters daily and cannot afford equipment failure, the Platypus GravityWorks justifies its higher price with a dual-bag system, faster flow, and sturdier construction. The Go Flow is the smart choice when weight, pack space, and budget are the primary constraints — which, for most casual campers and hikers, they are.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 62%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; width: 200%; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-slide 4s linear infinite; will-change: transform; }
  @keyframes gradient-slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
