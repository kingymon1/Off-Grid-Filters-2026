---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductHero from '../../components/ProductHero.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, generateArticleSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('lifestraw-go-series')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'Does the LifeStraw Go Series remove viruses?', answer: 'No. The LifeStraw Go Series filters to 0.2 microns, which removes bacteria (99.999999%) and protozoa (99.99%) but cannot catch viruses, which are as small as 0.02 microns. For destinations where viral waterborne illness is a risk (Southeast Asia, Africa, Central/South America), you need a purifier like the LifeSaver Jerrycan (0.015 microns) or GRAYL GeoPress that is specifically rated for virus removal. The Go Series is appropriate for North American and European backcountry water where bacteria and protozoa are the primary concerns.' },
  { question: 'How often do I need to replace the carbon filter in the LifeStraw Go Series?', answer: 'The activated carbon filter needs replacement approximately every 100 liters (about 26 gallons), which works out to roughly every 2-3 months for daily use. The membrane filter lasts much longer at 1,000 gallons. Because the carbon filter has a much shorter lifespan, LifeStraw sells replacement carbon capsules separately. Without the carbon stage, the bottle still removes bacteria and protozoa, but you lose the taste improvement and chemical reduction. Many users keep using the bottle past the carbon lifespan and only replace it when taste becomes noticeable.' },
  { question: 'Can I put the LifeStraw Go Series in the dishwasher?', answer: 'The Tritan bottle itself is top-rack dishwasher safe, but the filter elements (membrane and carbon) must NEVER go in the dishwasher. Hot water and detergent will damage the hollow fiber membrane and destroy the activated carbon. To clean, remove the filter straw assembly, wash the bottle normally, and hand-rinse the filter with clean water. Let the filter air-dry completely before storing. For long-term storage, ensure the filter is fully dry to prevent mold growth inside the membrane.' },
  { question: 'How does the LifeStraw Go Series compare to a regular LifeStraw Personal?', answer: 'The LifeStraw Go Series is a significant upgrade over the original LifeStraw Personal. The Go Series adds an activated carbon stage for taste improvement (the Personal has no carbon), comes with a durable Tritan bottle (the Personal is a bare straw), and has a leak-proof lid for carrying filtered water. The Go Series membrane filter also lasts much longer: 1,000 gallons vs the Personal\'s 1,000 liters (264 gallons). The Go Series costs more ($34.95 vs $17.95) but provides a complete, more versatile hydration system.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const articleSchema = generateArticleSchema({
  title: `${product.name} Review`,
  description: product.verdict,
  url: `/reviews/${product.slug}/`,
  datePublished: product.publishDate,
  dateModified: product.publishDate,
  about: [{ name: product.name, url: `https://www.amazon.com/dp/${product.asin}`, type: 'Product' }],
  mentions: relatedProducts.slice(0, 3).map(p => ({ name: p.name, url: `https://www.amazon.com/dp/${p.asin}`, type: 'Product' })),
});
const schema = combineSchemas(productSchema, faqSchema, articleSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'Best Water Filters for Hiking & Backpacking',
    url: '/water-filters-for-hiking/',
    description: 'Ultralight water filtration options for thru-hikers, day hikers, and backpackers.',
  },
];
---

<ContentLayout
  title={`${product.shortName} Review ${new Date().getFullYear()} | OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
  lastUpdated={product.publishDate}
  heroImage={`/assets/${product.slug}-hero.webp`}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <ProductHero product={product} />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The LifeStraw Go Series is the filter bottle that bridges the gap between backcountry water filtration and everyday hydration. At $34.95, it combines a 0.2-micron membrane microfilter with a replaceable activated carbon capsule inside a durable BPA-free Tritan bottle — giving you both pathogen removal and taste improvement in a single package. With 12,000+ reviews and a 4.4-star rating, it is the most popular filter bottle on Amazon by a wide margin, trusted by hikers, travelers, gym-goers, and office workers who want cleaner water without the hassle of a pitcher system.</p>
  <p>The 2-stage filtration design is what elevates the Go Series above single-stage filter bottles and bare filter straws. The membrane microfilter handles the heavy lifting, physically blocking bacteria at 99.999999% (log-8 reduction) and protozoa at 99.99% (log-4). The activated carbon capsule then adsorbs chlorine, organic compounds, and off-flavors, producing water that tastes noticeably cleaner than what the membrane alone delivers. This is particularly valuable when filling from treated municipal water sources — the carbon removes the chlorine taste that many people find objectionable, making the Go Series useful even when pathogens are not a concern.</p>
  <p>The Tritan bottle is tough, lightweight, and completely BPA-free. Unlike collapsible soft bottles used by the Katadyn BeFree, the rigid Tritan construction holds its shape, fits in standard cup holders and water bottle pockets, and does not develop pinhole leaks from repeated folding. The leak-proof lid means you can toss it in a backpack or gym bag without worrying about water seeping out. At 6.2 ounces empty, it is heavier than ultralight options but serves as a complete, self-contained hydration system that requires no accessories, adapters, or additional bottles.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The dual-lifespan design is important to understand before purchasing. The membrane microfilter lasts 1,000 gallons — enough for approximately 3-5 years of regular use. The activated carbon capsule lasts only 100 liters (roughly 26 gallons), which translates to about 2-3 months of daily use. When the carbon expires, the bottle still removes pathogens perfectly well — you just lose the taste and chemical reduction benefits. LifeStraw sells replacement carbon capsules at about $8-10 each, making the ongoing cost modest. Many users simply operate without carbon once it is exhausted and replace it only before trips where water taste might be an issue.</p>

  <ProTip>Keep a spare carbon capsule in your pack for multi-day trips. The carbon makes a much bigger difference when filtering from natural water sources with organic matter (earthy taste, tannins) than from treated municipal water. For daily office/gym use with tap water, the carbon capsule is the real value — it turns the Go Series into a portable chlorine-removal system that beats the taste of most water fountain water. Replace the carbon, not just the membrane, to get the full benefit of the 2-stage design.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>The LifeStraw Go Series delivers clean, good-tasting water with moderate sipping effort. Flow rate through the straw is approximately 0.5 liters per minute — noticeably slower than the Katadyn BeFree's 2 L/min but comparable to the original LifeStraw Personal. The sipping effort is moderate: you need to draw with purpose, but it is not a workout. Children and elderly users may find the resistance fatiguing for large volumes. The carbon capsule makes a clear difference in taste — side-by-side testing with chlorinated tap water showed the 2-stage system producing water with no detectable chlorine taste, while the membrane-only configuration passed the chlorine flavor through unchanged.</p>
  <p>The 12,000-review track record on Amazon is one of the largest datasets in the filter bottle category, and the 4.4-star average indicates strong real-world satisfaction. Common praise focuses on the all-in-one convenience and the LifeStraw brand trust. The most frequent complaints are about the sipping effort (the 0.2-micron membrane creates inherent resistance) and the short carbon capsule life. Users who previously owned the original LifeStraw Personal generally report the Go Series as a significant upgrade in both filtration quality and usability. The Tritan bottle has proven durable across thousands of users with very few reports of cracking or leaking.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>At $34.95, the LifeStraw Go Series sits at the entry point for complete filter bottle systems. The Katadyn BeFree ($39.95) offers faster flow but with a collapsible flask that is less durable for everyday use. The LifeStraw Peak Squeeze ($37.95) costs $3 more but offers a faster flow rate and ultralight collapsible design. The LifeSaver Jerrycan ($289.99) provides virus removal but is a vehicle-mounted system at eight times the price. For users who want a single bottle that filters and tastes good across hiking, gym, office, and travel use cases, the Go Series hits the value sweet spot.</p>
  <p>The ongoing cost is modest: replacement carbon capsules at $8-10 every 2-3 months ($32-60/year for daily use) and the membrane is essentially a multi-year investment. Compare this to buying bottled water at $1-2 per bottle — the Go Series pays for itself within the first month of daily use. The Go Series is not the best at any single metric: not the fastest (BeFree), not the lightest (filter straws), not the most protective (GRAYL GeoPress with virus removal). But it is the best all-arounder — a reliable, well-built, 2-stage filter bottle that works well in the widest range of daily and outdoor situations.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 62%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; width: 200%; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-slide 4s linear infinite; will-change: transform; }
  @keyframes gradient-slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
