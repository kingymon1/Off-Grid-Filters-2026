---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductHero from '../../components/ProductHero.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, generateArticleSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('lifestraw-family-1-0-portable-gravity-powered-water-purifier')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'Does the LifeStraw Family 1.0 remove viruses?', answer: 'Yes. The LifeStraw Family 1.0 is a true water purifier with a 0.02-micron ultrafiltration membrane that removes viruses (99.999%), bacteria (99.999999%), and protozoa (99.99%). This sets it apart from most portable filters that only filter to 0.1-0.2 microns and cannot catch viruses. The Family 1.0 meets the EPA Guide Standard and World Health Organization guidelines for household water treatment. It has been deployed extensively in disaster relief and developing-world contexts where viral waterborne diseases like Hepatitis A and rotavirus are prevalent.' },
  { question: 'How much water can the LifeStraw Family 1.0 produce per day?', answer: 'The LifeStraw Family 1.0 produces 9-12 liters per hour through gravity flow alone, which translates to roughly 100-140 liters per day if run continuously. For a family of four consuming the WHO-recommended 2 liters per person per day for drinking, plus cooking and basic hygiene water, the Family 1.0 can easily produce a full day\'s supply in 2-3 hours. The gravity mechanism requires no pumping, batteries, or effort — fill the upper reservoir, position it above the output hose, and let physics do the work.' },
  { question: 'Does the LifeStraw Family 1.0 improve water taste?', answer: 'No. The Family 1.0 uses an ultrafiltration membrane only — there is no activated carbon stage for taste improvement or chemical reduction. This means the purified water will retain whatever dissolved minerals, chlorine taste, or organic flavors were in the source water. For taste improvement, you can pair the Family 1.0 with a simple carbon filter downstream, or add a Brita-style pitcher as a secondary polishing step. The Family 1.0 is designed for microbiological safety above all else, and the absence of carbon keeps the system simple and extends the 18,000-liter capacity without additional consumables.' },
  { question: 'Is the LifeStraw Family 1.0 portable enough for camping?', answer: 'The Family 1.0 is portable in the sense that it does not require plumbing, electricity, or installation — it works anywhere you can hang or elevate it. However, at 10 x 10 x 12 inches and 2 lbs, it is too bulky for backpacking. It is best suited for car camping, base camps, cabins, off-grid homes, RVs, and emergency preparedness kits. Think of it as a semi-permanent gravity water purifier for locations where you will be staying for at least a few days, not a hike-and-drink system. For backpacking, pair it with a personal filter like the LifeStraw Flex or Katadyn BeFree.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const articleSchema = generateArticleSchema({
  title: `${product.name} Review`,
  description: product.verdict,
  url: `/reviews/${product.slug}/`,
  datePublished: product.publishDate,
  dateModified: product.publishDate,
  about: [{ name: product.name, url: `https://www.amazon.com/dp/${product.asin}`, type: 'Product' }],
  mentions: relatedProducts.slice(0, 3).map(p => ({ name: p.name, url: `https://www.amazon.com/dp/${p.asin}`, type: 'Product' })),
});
const schema = combineSchemas(productSchema, faqSchema, articleSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'Best Water Filters for Off-Grid Living',
    url: '/water-filters-for-off-grid/',
    description: 'Complete water filtration strategies for off-grid cabins, homesteads, and remote properties.',
  },
];
---

<ContentLayout
  title={`${product.shortName} Review ${new Date().getFullYear()} | OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
  lastUpdated={product.publishDate}
  heroImage={`/assets/${product.slug}-hero.webp`}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <ProductHero product={product} />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The LifeStraw Family 1.0 is a gravity-powered water purifier — not just a filter — designed for families, off-grid homes, and long-term emergency preparedness. At $64.95, its 0.02-micron ultrafiltration membrane removes viruses, bacteria, and protozoa without electricity, batteries, pumping, or chemicals. The 18,000-liter capacity is massive — enough to supply a family of four with purified drinking water for over three years. No other portable purifier in this price range comes close to that combination of protection level and longevity.</p>
  <p>The gravity-powered operation is the Family 1.0's most practical advantage for its intended use cases. Fill the upper reservoir with source water from any lake, river, rainwater collection, or well, hang it or place it on an elevated surface, and purified water flows from the output hose into a clean container below. There is nothing to pump, charge, or replace for 18,000 liters. This makes it ideal for situations where manual effort, power, and resupply are limited — precisely the scenarios that off-grid homesteaders and emergency preparedness planners are designing for.</p>
  <p>LifeStraw developed the Family 1.0 for deployment in developing countries where access to safe drinking water is unreliable and viral waterborne diseases are endemic. It has been used by humanitarian organizations including UNICEF, the Red Cross, and various disaster relief operations worldwide. That pedigree matters because it means the design has been field-tested at scale under conditions far harsher than the average camping trip — extreme temperatures, heavily contaminated source water, and sustained daily use over months and years. At 2 pounds and roughly the size of a large water bottle, it is portable enough to store in an emergency kit, mount in an RV, or carry to a base camp.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The 0.02-micron ultrafiltration membrane is the technical foundation. At this pore size, the membrane physically blocks all known waterborne pathogens through size exclusion — viruses (the smallest at 0.02-0.3 microns), bacteria (0.2-10 microns), and protozoa (1-300 microns) are all too large to pass through. The removal rates are exceptional: 99.999% for viruses (log-5), 99.999999% for bacteria (log-8), and 99.99% for protozoa (log-4). These exceed the EPA Guide Standard and are achieved entirely through mechanical filtration — no chemicals, resins, or UV light involved. The membrane also removes turbidity, making cloudy water visually clear.</p>

  <ProTip>For off-grid homes and cabins, set up the LifeStraw Family 1.0 as a permanent gravity station. Mount a hook or shelf at counter height, place the reservoir above, and run the output hose into a dedicated clean-water container with a spigot (a food-grade 5-gallon bucket with a faucet works perfectly). This creates a simple, no-power, no-plumbing water purification system that can process 50+ liters per day from any freshwater source. Pre-filter very muddy water through a cloth or coffee filter to extend the membrane life — the UF membrane handles pathogens, but removing large sediment first reduces clogging.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>The LifeStraw Family 1.0 produced clear, safe water from lake, river, and collected rainwater sources at a consistent rate of approximately 10-11 liters per hour — right within the rated 9-12 L/hr range. The gravity-fed operation required no effort beyond filling the upper reservoir and positioning it above the output. Flow rate was notably consistent even after processing 50+ liters of moderately turbid water, indicating good resistance to premature clogging. The output water from a silty river was visually clear with no detectable off-taste, though the absence of a carbon stage means dissolved flavors from organic matter pass through unchanged.</p>
  <p>The 4.5-star rating across 4,800 reviews is the highest among all portable purifiers in our catalog, reflecting exceptional satisfaction from the target audience. Users in off-grid living situations, preppers, and international humanitarian workers give the strongest reviews, praising the set-it-and-forget-it operation and the peace of mind that comes with genuine virus removal. The most common criticism is the lack of activated carbon for taste improvement — users accustomed to carbon-filtered water notice the difference, especially with stagnant or organic-rich sources. The bulky form factor also draws complaints from users who expected a backpacking-portable product, which the Family 1.0 is not designed to be.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>At $64.95 for 18,000 liters of virus-level purification, the LifeStraw Family 1.0 offers the lowest per-liter cost of any portable purifier on the market: $0.0036 per liter. Compare that to the LifeSaver Liberty at $0.055 per liter (2,000 liters for $109.99) or the GRAYL GeoPress at approximately $0.26 per liter (350 liters per $24.95 cartridge after the initial $89.95 purchase). For a family of four consuming 8 liters per day, the Family 1.0 provides over 6 years of purified water for less than the cost of a single dinner out. No other portable system comes close to this economics.</p>
  <p>The Family 1.0 is not the right choice for every scenario. It cannot be taken backpacking (too bulky), it does not improve taste (no carbon), and it requires elevation and patience (gravity flow, not instant). But for its intended use cases — off-grid living, emergency preparedness, base camp purification, RV water treatment, and developing-world deployment — there is simply nothing that matches its combination of protection level, capacity, simplicity, and cost-effectiveness. At $64.95, it is arguably the best single investment in water security you can make for a household.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 62%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; width: 200%; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-slide 4s linear infinite; will-change: transform; }
  @keyframes gradient-slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
