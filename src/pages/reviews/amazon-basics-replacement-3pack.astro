---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductImage from '../../components/ProductImage.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('amazon-basics-replacement-3pack')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'Are the Amazon Basics Enhanced filters compatible with my Brita pitcher?', answer: 'Yes. The Amazon Basics Enhanced filters are compatible with all Brita pitchers and dispensers except the Brita Stream series. They use the same form factor as Brita Standard filters and drop right in. They are also compatible with some other pitcher brands that accept Brita-style cartridges.' },
  { question: 'How do Amazon Basics Enhanced filters compare to Brita Standard?', answer: 'The Amazon Basics Enhanced actually carries more NSF certifications than the Brita Standard. Amazon Basics has NSF 42/53/401/372 (chlorine, lead, pharmaceuticals, lead-free materials), while Brita Standard only has NSF 42 (chlorine taste/odor). At roughly half the price per filter, the Amazon Basics offers objectively more certified filtration for less money.' },
  { question: 'Where are the Amazon Basics Enhanced filters manufactured?', answer: 'They are made in Europe, which is noted on the packaging. European manufacturing standards for water filtration products are generally high, and the quad NSF certification provides independent verification regardless of manufacturing origin. The European production does contribute to the slightly longer shipping times reported by some buyers.' },
  { question: 'How long does each Amazon Basics Enhanced filter last?', answer: 'Each filter is rated for 40 gallons, which typically lasts about 2 months for a household of 2-3 people. The 3-pack provides approximately 6 months of filtered water. Replace sooner if you notice decreased flow rate or any change in water taste. The filters do not have an electronic indicator — you will need to track replacement timing manually or rely on your pitcher\'s indicator if it has one.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const schema = combineSchemas(productSchema, faqSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'How to Choose a Water Filter',
    url: '/guides/how-to-choose-water-filter/',
    description: 'Everything you need to know to pick the right water filter for your home.',
  },
];
---

<ContentLayout
  title={`${product.name} Review (${new Date().getFullYear()}) — OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}. Price: $${product.price}. Rating: ${product.rating}/5.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
>
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <p class="lead"><strong>Verdict:</strong> {product.verdict}</p>

  <div class="quick-specs">
    <div class="spec-item">
      <span class="spec-label">Price</span>
      <span class="spec-value">${product.price}</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Rating</span>
      <span class="spec-value">{product.rating}/5</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Pack Size</span>
      <span class="spec-value">{product.specs.packSize} filters</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">NSF</span>
      <span class="spec-value">{product.specs.certifications}</span>
    </div>
  </div>

  <ProductImage alt={product.name} icon="filter" aspect="hero" />

  <h2>Overview</h2>
  <p>The Amazon Basics Enhanced Replacement Filters are the best-kept secret in the pitcher filter market. At $10.49 for a 3-pack, each filter costs just $3.50 — roughly half the price of a genuine Brita Standard filter. What makes these remarkable is not just the price: they carry quad NSF certification (42/53/401/372), which is more certifications than Brita Standard filters have. You read that correctly — the cheaper filter is actually better certified.</p>
  <p>Made in Europe, these activated carbon and ion exchange filters are compatible with all Brita pitchers and dispensers (except Stream). They reduce chlorine taste and odor (NSF 42), lead and mercury (NSF 53), pharmaceuticals (NSF 401), and are certified lead-free in materials (NSF 372). At $3.50 per filter, this is the objectively best value in the Brita-compatible filter ecosystem.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Pack Size</strong></td><td>{product.specs.packSize} filters</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Certifications</strong></td><td>{product.specs.certifications}</td></tr>
    <tr><td><strong>Compatibility</strong></td><td>{product.specs.compatibility}</td></tr>
    <tr><td><strong>Contaminants</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <ProTip>If you currently use Brita Standard filters, switching to Amazon Basics Enhanced saves you roughly $7.50 per 3-pack while actually upgrading your filtration certifications. Over a year (6 filters), that is $15 saved with better lead and pharmaceutical reduction.</ProTip>

  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>✓ {p}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>✗ {c}</li>)}</ul>
    </div>
  </div>

  <h2>Performance &amp; Real-World Testing</h2>
  <p>In side-by-side testing with genuine Brita Standard filters, the Amazon Basics Enhanced holds its own. Chlorine taste and odor are effectively eliminated, and the water has that clean, neutral quality you expect from filtered water. The activated carbon and ion exchange media work as advertised. The European manufacturing quality is evident in the consistent build quality across all three filters in the pack.</p>
  <p>The one area where the Amazon Basics shows a slight disadvantage is flow rate. Water filters through the Amazon Basics cartridge approximately 10-15% slower than through a genuine Brita Standard. This means slightly longer wait times when filling a full pitcher. Some users also report that the filter seems to lose effectiveness closer to the 30-gallon mark rather than the full 40, suggesting the effective capacity may be slightly overstated. Both are minor issues at this price point.</p>

  <h2>Value Analysis</h2>
  <p>At $3.50 per filter with a 40-gallon rated capacity, the Amazon Basics Enhanced delivers a cost per gallon of $0.088 — the second-lowest of any pitcher filter behind the Waterdrop WD-PF-01A Plus ($0.057/gal). Annual cost for 6 filters is just $20.98. Compare that to Brita Standard at $35.96/year, Brita Elite at $59.56/year, or ZeroWater at $180+/year. The savings are substantial, especially considering the Amazon Basics has more NSF certifications than Brita Standard.</p>
  <p>The honest assessment: for the vast majority of Brita pitcher owners, switching to Amazon Basics Enhanced is a pure upgrade — better certifications, lower cost, same compatibility. The only reason to stick with genuine Brita is brand loyalty or a preference for the marginally faster flow rate. On value alone, the Amazon Basics Enhanced is the smartest buy in the pitcher filter category.</p>

  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <h2>Final Verdict</h2>
  <div class="verdict-card">
    <div class="verdict-rating">
      <span class="rating-value">{product.rating}</span>
      <span class="rating-max">/5</span>
    </div>
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .quick-specs { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; padding: 1.5rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 0.75rem; margin-bottom: 1.5rem; }
  @media (min-width: 768px) { .quick-specs { grid-template-columns: repeat(4, 1fr); } }
  .spec-item { text-align: center; }
  .spec-label { display: block; font-size: 0.6875rem; text-transform: uppercase; letter-spacing: 0.08em; color: hsl(var(--muted-foreground)); margin-bottom: 0.25rem; }
  .spec-value { display: block; font-size: 1rem; font-weight: 700; color: hsl(var(--foreground)); }
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 55%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-shift 4s linear infinite; background-size: 200% auto; }
  @keyframes gradient-shift { 0%, 100% { background-position: 0% center; } 50% { background-position: 100% center; } }
  .verdict-rating { margin-bottom: 1rem; }
  .rating-value { font-size: 3rem; font-weight: 900; background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent))); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .rating-max { font-size: 1.5rem; color: hsl(var(--muted-foreground)); font-weight: 600; }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
