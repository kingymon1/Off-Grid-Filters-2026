---
import ContentLayout from '../../layouts/ContentLayout.astro';
import ProductImage from '../../components/ProductImage.astro';
import ProTip from '../../components/ProTip.astro';
import { getProductBySlug, getAffiliateUrl, getRelatedProducts, isPublished, categories, getPriceTier } from '../../lib/config';
import { generateProductSchema, generateFAQSchema, combineSchemas } from '../../lib/schema';

const product = getProductBySlug('pentair-everpure-h300')!;
if (!isPublished(product.publishDate)) return Astro.redirect('/404');

const relatedProducts = getRelatedProducts(product);
const category = categories.find(c => c.slug === product.category);

const faqs = [
  { question: 'What comes in the Pentair Everpure H-300 box?', answer: 'The H-300 is a complete system that includes the filter head (mounting bracket), one replacement cartridge, a dedicated drinking water faucet, all connection hardware, and installation instructions. Unlike the H-1200 replacement cartridge set, you do not need to purchase any additional components to get started — everything you need for a full installation is in the box.' },
  { question: 'Can I install the Pentair Everpure H-300 myself?', answer: 'If you are comfortable with basic plumbing tasks, yes. The installation requires connecting to your cold water line under the sink, mounting the filter head, and drilling a hole in your sink or countertop for the dedicated faucet. Budget 1-2 hours for a DIY installation. If you are not comfortable drilling into your countertop, a plumber can typically complete the install in 30-60 minutes for $100-200.' },
  { question: 'How does the H-300 compare to the H-1200?', answer: 'The H-300 is a complete system ($505) with a single 300-gallon cartridge, while the H-1200 is a replacement cartridge set ($390) with twin cartridges totaling 1,000 gallons of capacity. The H-300 is the right choice if you are starting from scratch and need everything in one box. The H-1200 cartridges offer better long-term value with 3.3x the capacity per replacement cycle, but require the separate H-1200 filter head.' },
  { question: 'Does the Everpure H-300 reduce PFAS and forever chemicals?', answer: 'The H-300 is NSF 42/53 certified for chlorine and lead reduction, but it does not carry the NSF 401 certification that covers PFAS and pharmaceuticals like the H-1200 does. If PFAS removal is a primary concern, consider the H-1200 system instead, or pair the H-300 with a secondary filtration stage. For most municipal water sources, the H-300 provides excellent overall filtration quality.' },
];

const productSchema = generateProductSchema(product);
const faqSchema = generateFAQSchema(faqs);
const schema = combineSchemas(productSchema, faqSchema);

const relatedArticles = [
  ...relatedProducts.slice(0, 2).map(p => ({
    title: `${p.name} Review`,
    url: `/reviews/${p.slug}/`,
    description: p.verdict,
  })),
  ...(category ? [{
    title: `Best ${category.name}`,
    url: `/best-${category.slug}/`,
    description: category.description,
  }] : []),
  {
    title: 'How to Choose a Water Filter',
    url: '/guides/how-to-choose-water-filter/',
    description: 'Everything you need to know to pick the right water filter for your home.',
  },
];
---

<ContentLayout
  title={`${product.name} Review (${new Date().getFullYear()}) — OffGrid Filters`}
  description={`Honest review of the ${product.name}. ${product.bestFor}. Rating: ${product.rating}/5.`}
  canonical={`/reviews/${product.slug}/`}
  category="Reviews"
  currentPage={product.name}
  schema={schema}
  relatedArticles={relatedArticles}
>
  <!-- HERO -->
  <h1>{product.name} Review {new Date().getFullYear()}</h1>
  <p class="lead"><strong>Verdict:</strong> {product.verdict}</p>

  <div class="quick-specs">
    <div class="spec-item">
      <span class="spec-label">Price Range</span>
      <span class="spec-value">{getPriceTier(product.price)}</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Rating</span>
      <span class="spec-value">{product.rating}/5</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Capacity</span>
      <span class="spec-value">{product.specs.capacity}</span>
    </div>
    <div class="spec-item">
      <span class="spec-label">Micron Rating</span>
      <span class="spec-value">{product.specs.micronRating}μm</span>
    </div>
  </div>

  <ProductImage alt={product.name} icon="faucet" aspect="hero" />

  <!-- OVERVIEW -->
  <h2>Overview</h2>
  <p>The Pentair Everpure H-300 is the complete, ready-to-install package for homeowners who want commercial-grade water filtration without assembling components from multiple sources. At $505, it is the most expensive single system in our catalog, but the box includes everything — filter head, cartridge, dedicated faucet, and all mounting hardware. You unbox it, install it, and start drinking restaurant-quality water. That all-in-one convenience is the core value proposition, and for many buyers, the premium is worth not having to figure out compatibility between separate parts.</p>
  <p>The H-300 uses the same Micro-Pure activated carbon and precoat submicron technology that powers Pentair's commercial product line. The 0.5-micron filtration level catches cysts, lead, chlorine, mold, and algae while preserving the dissolved minerals that make water taste good. It is a single-cartridge design, which means a smaller under-sink footprint than the twin-cartridge H-1200, but the trade-off is capacity: 300 gallons versus the H-1200's 1,000 gallons.</p>
  <p>The dedicated faucet is a notable inclusion. Rather than replacing your existing faucet or using an adapter, the H-300 installs a separate drinking water tap on your sink or countertop. This means filtered water is always on demand at full pressure, separate from your regular hot and cold water. It is a clean, professional installation that most under-sink systems at lower price points cannot match.</p>

  <div class="best-for-box">
    <strong>Best For:</strong> {product.bestFor}
  </div>

  <!-- KEY FEATURES -->
  <h2>Key Features &amp; Specifications</h2>
  <table class="specs-table">
    <tr><td><strong>Filtration Stages</strong></td><td>{product.specs.filtrationStages}</td></tr>
    <tr><td><strong>Technology</strong></td><td>{product.specs.filtrationTechnology}</td></tr>
    <tr><td><strong>Micron Rating</strong></td><td>{product.specs.micronRating} microns</td></tr>
    <tr><td><strong>Capacity</strong></td><td>{product.specs.capacity}</td></tr>
    <tr><td><strong>Flow Rate</strong></td><td>{product.specs.flowRate}</td></tr>
    <tr><td><strong>Certifications</strong></td><td>{product.specs.certifications}</td></tr>
    <tr><td><strong>Dimensions</strong></td><td>{product.specs.dimensions}</td></tr>
    <tr><td><strong>Weight</strong></td><td>{product.specs.weight}</td></tr>
    <tr><td><strong>Filter Life</strong></td><td>{product.specs.filterLife}</td></tr>
    <tr><td><strong>Contaminants Removed</strong></td><td>{product.specs.contaminantsRemoved}</td></tr>
  </table>

  <p>The single-cartridge design keeps things simple: one cartridge to track, one to replace. Pentair's quarter-turn replacement mechanism lets you swap cartridges in seconds without tools — turn a quarter rotation, pull out the old cartridge, push in the new one, and turn to lock. No wrenches, no mess, no shutting off the water supply. The NSF 42/53 certification covers chlorine taste, lead, and cyst reduction. The complete system weighs 8 pounds installed and the cartridge itself measures 14 x 4 inches.</p>

  <ProTip>Mark your installation date on your calendar or phone. The H-300 cartridge lasts 300 gallons or 6-12 months depending on your water usage and source water quality. Households that use filtered water only for drinking and coffee typically get a full 12 months. Families that cook with filtered water may reach 300 gallons in 6-8 months. When flow rate starts to drop noticeably, it is time to replace.</ProTip>

  <!-- PROS & CONS -->
  <h2>Pros &amp; Cons</h2>
  <div class="pros-cons-grid">
    <div class="pros-list">
      <h3>What We Like</h3>
      <ul>{product.pros.map(p => <li>{`✓ ${p}`}</li>)}</ul>
    </div>
    <div class="cons-list">
      <h3>What Could Be Better</h3>
      <ul>{product.cons.map(c => <li>{`✗ ${c}`}</li>)}</ul>
    </div>
  </div>

  <!-- PERFORMANCE -->
  <h2>Performance &amp; Real-World Testing</h2>
  <p>Water quality from the H-300 is immediately noticeable and, for many users, life-changing compared to pitcher filtration. The chlorine tang of municipal water is completely eliminated, and the water has a clean, mineral-rich character that makes it genuinely pleasant to drink straight. Coffee and tea prepared with H-300 filtered water taste noticeably better — the subtle flavors come through without the interference of chlorine or sediment. The 0.5 GPM flow rate is adequate for filling glasses and water bottles but will feel slow if you are trying to fill a large pot.</p>
  <p>Reliability is the Everpure hallmark, and the H-300 delivers. Across 850 Amazon reviews with a 4.6-star average, the most common theme is that the system simply works — year after year, with no leaks, no failures, and consistent water quality. The quarter-turn cartridge swap is universally praised as the easiest replacement mechanism on the market. The main complaint from long-term users is the replacement cartridge cost, which runs $100-130 per cartridge. At 300 gallons, that is roughly $0.33-0.43 per gallon of filtered water.</p>

  <!-- VALUE ANALYSIS -->
  <h2>Value Analysis</h2>
  <p>The $505 upfront cost is the highest barrier to entry in our entire filter catalog. However, this is a complete, permanent system — the filter head and faucet are one-time purchases that will last for years. Ongoing costs are the replacement cartridge only, which runs $100-130 for 300 gallons. Compared to the H-1200 replacement set ($390 for 1,000 gallons), the H-300's per-gallon cost is roughly 3x higher on an ongoing basis. If you plan to use Everpure long-term, starting with the H-300 for the complete system and then upgrading to the H-1200 filter head and cartridge set would give you the best of both worlds.</p>
  <p>Against other under-sink options, the H-300 is expensive but targets a different buyer. The iSpring RCC7AK at $199 offers 6-stage RO with superior contaminant removal, while the Waterdrop G3P600 at $429 provides tankless RO with 600 GPD throughput. The H-300's advantage is its simplicity, mineral preservation, and the Pentair commercial pedigree. If you want set-and-forget reliability from a brand trusted by the food service industry worldwide, the H-300 delivers exactly that.</p>

  <!-- FAQ -->
  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>

  <!-- VERDICT & CTA -->
  <h2>Final Verdict</h2>
  <div class="verdict-card">
    <div class="verdict-rating">
      <span class="rating-value">{product.rating}</span>
      <span class="rating-max">/5</span>
    </div>
    <p>{product.verdict}</p>
    <a href={getAffiliateUrl(product.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color: #fff !important; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
      <span>Check Price on Amazon</span>
    </a>
  </div>

  <p style="text-align:center; margin-top:1rem;">
    <a href={`/best-${product.category}/`}>See all {category?.name} reviews &rarr;</a>
  </p>
</ContentLayout>

<style>
  .quick-specs { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; padding: 1.5rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 0.75rem; margin-bottom: 1.5rem; }
  @media (min-width: 768px) { .quick-specs { grid-template-columns: repeat(4, 1fr); } }
  .spec-item { text-align: center; }
  .spec-label { display: block; font-size: 0.6875rem; text-transform: uppercase; letter-spacing: 0.08em; color: hsl(var(--muted-foreground)); margin-bottom: 0.25rem; }
  .spec-value { display: block; font-size: 1rem; font-weight: 700; color: hsl(var(--foreground)); }
  .best-for-box { padding: 1rem 1.25rem; background: hsl(var(--primary) / 0.06); border: 1px solid hsl(var(--primary) / 0.15); border-radius: 0.75rem; margin: 1.5rem 0; font-size: 0.9375rem; color: hsl(var(--foreground)); }
  .pros-cons-grid { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 1.5rem 0; }
  @media (min-width: 768px) { .pros-cons-grid { grid-template-columns: 1fr 1fr; } }
  .pros-list, .cons-list { padding: 1.25rem; border-radius: 0.75rem; border: 1px solid hsl(var(--border)); }
  .pros-list { background: hsl(142 70% 45% / 0.04); border-color: hsl(142 70% 45% / 0.15); }
  .cons-list { background: hsl(0 70% 45% / 0.04); border-color: hsl(0 70% 45% / 0.15); }
  .pros-list h3 { color: hsl(142 70% 45%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .cons-list h3 { color: hsl(0 70% 55%); font-size: 0.875rem; margin-bottom: 0.75rem; margin-top: 0; }
  .pros-list ul, .cons-list ul { list-style: none; padding: 0; margin: 0; }
  .pros-list li, .cons-list li { padding: 0.375rem 0; font-size: 0.9375rem; }
  .verdict-card { text-align: center; padding: 2rem; background: hsl(var(--muted) / 0.3); border: 1px solid hsl(var(--border)); border-radius: 1rem; margin: 1.5rem 0; position: relative; overflow: hidden; }
  .verdict-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--accent)), hsl(var(--primary))); animation: gradient-shift 4s linear infinite; background-size: 200% auto; }
  @keyframes gradient-shift { 0%, 100% { background-position: 0% center; } 50% { background-position: 100% center; } }
  .verdict-rating { margin-bottom: 1rem; }
  .rating-value { font-size: 3rem; font-weight: 900; background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--accent))); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .rating-max { font-size: 1.5rem; color: hsl(var(--muted-foreground)); font-weight: 600; }
  .specs-table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
  .specs-table td { padding: 0.75rem 1rem; border-bottom: 1px solid hsl(var(--border) / 0.5); font-size: 0.9375rem; color: hsl(var(--muted-foreground)); }
  .specs-table td:first-child { width: 40%; color: hsl(var(--foreground)); }
</style>
