---
import ContentLayout from '../layouts/ContentLayout.astro';
import ProductImage from '../components/ProductImage.astro';
import ComparisonTable from '../components/ComparisonTable.astro';
import { getProductBySlug, getAffiliateUrl, comparisons, isPublished, getPriceTier } from '../lib/config';
import { generateFAQSchema, generateArticleSchema, combineSchemas } from '../lib/schema';

const comp = comparisons.find(c => c.slug === 'bluevua-ro100ropot-uv-vs-ispring-rcc7ak')!;
if (!isPublished(comp.publishDate)) return Astro.redirect('/404');

const productA = getProductBySlug(comp.productA)!;
const productB = getProductBySlug(comp.productB)!;
const year = new Date().getFullYear();

const tableProducts = [productA, productB].map((p, i) => ({
  name: p.name,
  asin: p.asin,
  rating: p.rating,
  price: p.price,
  filtrationStages: p.specs.filtrationStages || '',
  filtrationTechnology: p.specs.filtrationTechnology || '',
  micronRating: p.specs.micronRating || '',
  capacity: p.specs.capacity || '',
  flowRate: p.specs.flowRate || '',
  certifications: p.specs.certifications || '',
  filterLife: p.specs.filterLife || '',
  contaminantsRemoved: p.specs.contaminantsRemoved || '',
  isEditorsPick: i === 1,
}));

const faqs = [
  { question: 'Should I get a countertop or under-sink reverse osmosis system?', answer: 'It depends on your living situation. Countertop RO systems like the Bluevua require zero installation — just plug in and pour. They are ideal for renters, apartments, and anyone who cannot modify plumbing. Under-sink RO systems like the iSpring require a permanent installation with drilling but offer higher flow rates, more capacity, and a cleaner counter. If you own your home and can drill, under-sink is generally the better investment.' },
  { question: 'Does the Bluevua RO100ROPOT-UV really kill viruses with UV?', answer: 'Yes. The Bluevua\'s UV sterilization stage inactivates 99.99% of bacteria and viruses that pass through the RO membrane. While the RO membrane already removes most microorganisms, the UV stage provides an additional safety net. The iSpring RCC7AK does not have UV sterilization, relying solely on the RO membrane for pathogen removal — which is effective but not as comprehensive as RO + UV combined.' },
  { question: 'Which system produces better-tasting water?', answer: 'Both produce excellent water, but for different reasons. The iSpring\'s alkaline remineralization stage adds minerals back after RO filtration, raising the pH and giving water a slightly mineral, natural taste that many prefer. The Bluevua also has remineralization, but the iSpring\'s dedicated alkaline stage is generally more effective. Taste is subjective, but both are vastly better than tap water.' },
  { question: 'How much water do these systems waste?', answer: 'The Bluevua wastes less water with a 2:1 pure-to-drain ratio (2 gallons purified per 1 gallon wasted). The iSpring has a 1:3 ratio (1 gallon purified per 3 wasted). However, the iSpring processes much more water overall at 75 GPD versus the Bluevua\'s ~0.75 gallons per cycle. The Bluevua is more efficient per gallon but produces less total volume.' },
  { question: 'Can I use either system in an apartment or rental?', answer: 'The Bluevua is specifically designed for rentals and apartments — no installation, no drilling, no plumbing modifications. The iSpring requires drilling a hole in the countertop or sink for the faucet and connecting to the cold water line, which most landlords will not allow. If you rent, the Bluevua is your only option between these two.' },
];

const articleSchema = generateArticleSchema({
  title: `${productA.name} vs ${productB.name}`,
  description: `Countertop vs under-sink RO comparison: Bluevua RO100ROPOT-UV vs iSpring RCC7AK. We compare installation, filtration, price, and daily usability.`,
  url: `/${comp.slug}/`,
});
const faqSchema = generateFAQSchema(faqs);
const schema = combineSchemas(articleSchema, faqSchema);

const relatedArticles = [
  { title: `${productA.name} Review`, url: `/reviews/${productA.slug}/`, description: productA.verdict },
  { title: `${productB.name} Review`, url: `/reviews/${productB.slug}/`, description: productB.verdict },
  { title: 'Best Countertop & Pitcher Filters', url: '/best-countertop-filters/', description: 'Our top picks for countertop and pitcher water filtration systems.' },
  { title: 'What Is Reverse Osmosis?', url: '/what-is-reverse-osmosis/', description: 'A complete guide to reverse osmosis technology and how it works.' },
];
---

<ContentLayout
  title={`${productA.name} vs ${productB.name}: Which Is Better? (${year}) — OffGrid Filters`}
  description={`Countertop vs under-sink RO showdown: ${productA.name} vs ${productB.name}. We compare installation, filtration, price, and usability to help you choose.`}
  canonical={`/${comp.slug}/`}
  category="Compare"
  currentPage="Bluevua UV vs iSpring"
  schema={schema}
  relatedArticles={relatedArticles}
>
  <h1>{productA.name} vs {productB.name}: Which Is Better in {year}?</h1>

  <div class="verdict-card">
    <p><strong>Quick Verdict:</strong> The <strong>iSpring RCC7AK ($198.78)</strong> is the better system overall — higher capacity, faster flow, alkaline remineralization, and a lower price. But the <strong>Bluevua RO100ROPOT-UV ($317)</strong> wins for renters and apartment dwellers who cannot modify plumbing, with the added benefit of UV sterilization for virus protection.</p>
  </div>

  <ProductImage alt="Bluevua RO100ROPOT-UV countertop vs iSpring RCC7AK under-sink RO" icon="compare" aspect="hero" />

  <h2>At a Glance</h2>
  <ComparisonTable products={tableProducts} />

  <p class="lead">This comparison pits two fundamentally different approaches against each other: a no-install countertop RO with UV sterilization versus a permanently-installed under-sink RO with alkaline remineralization. Your living situation may decide this one before the specs even matter.</p>

  <h2>Category-by-Category Breakdown</h2>

  <h3>Installation &amp; Portability</h3>
  <p>The Bluevua requires absolutely zero installation — unbox it, plug it in, fill the reservoir, and press the button. You can move it to a new apartment in minutes. The iSpring requires drilling a faucet hole, connecting to the cold water line, mounting the filter assembly and tank under the sink, and routing drain tubing. It is a 1-2 hour project that most handy homeowners can manage, but it is a permanent modification. For renters, the Bluevua is the only viable option.</p>
  <div class="winner-badge">Winner: Bluevua RO100ROPOT-UV (zero installation)</div>

  <h3>Filtration Quality &amp; Safety</h3>
  <p>Both use 0.0001-micron RO membranes that remove TDS, lead, fluoride, PFAS, and heavy metals. The Bluevua adds UV sterilization, which kills 99.99% of bacteria and viruses — an extra safety layer the iSpring lacks. However, the iSpring's RO membrane is already effective at blocking microorganisms due to its extremely small pore size. The UV stage matters most for users with well water or water sources with known bacterial contamination. Both include remineralization to restore healthy minerals.</p>
  <div class="winner-badge">Winner: Bluevua RO100ROPOT-UV (UV sterilization)</div>

  <h3>Capacity &amp; Flow Rate</h3>
  <p>The iSpring dramatically outperforms with 75 GPD production and a 3-4 gallon storage tank that provides filtered water on demand for cooking, drinking, and coffee. The Bluevua processes just 0.75 gallons per cycle and requires manual filling and waiting. For a family cooking dinner and filling water bottles, the iSpring handles the load effortlessly. The Bluevua works for 1-2 people but can feel limiting for larger households or heavy water use.</p>
  <div class="winner-badge">Winner: iSpring RCC7AK (75 GPD vs 0.75 gal/cycle)</div>

  <h3>Price &amp; Value</h3>
  <p>The iSpring costs $198.78 — nearly $120 less than the Bluevua at $317 — while offering higher capacity, faster flow, and a proven track record of 18,000+ reviews. The iSpring also has cheaper, more widely-available replacement filters. The Bluevua's premium is justified by its zero-install convenience and UV sterilization, but purely on filtration-per-dollar, the iSpring is the better value.</p>
  <div class="winner-badge">Winner: iSpring RCC7AK ($198.78 vs $317)</div>

  <h3>Water Efficiency</h3>
  <p>The Bluevua achieves a 2:1 pure-to-drain ratio while the iSpring wastes water at 1:3. This means the iSpring sends 3 gallons down the drain for every gallon purified, while the Bluevua only wastes half a gallon per gallon purified. For environmentally-conscious users, the Bluevua's superior water efficiency is a significant advantage, particularly in drought-prone regions.</p>
  <div class="winner-badge">Winner: Bluevua RO100ROPOT-UV (2:1 vs 1:3)</div>

  <h2>Who Should Get Which?</h2>
  <div class="recommendation-grid">
    <div class="rec-card rec-a">
      <h3>Get the {productA.name} if...</h3>
      <ul>
        <li>You rent your home and cannot modify plumbing or drill holes</li>
        <li>You want UV sterilization for virus and bacteria protection</li>
        <li>You need a portable system you can move between homes</li>
        <li>Water efficiency is important — 2:1 pure-to-drain ratio</li>
      </ul>
      <a href={getAffiliateUrl(productA.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.2)"><span>Check Price on Amazon</span></a>
    </div>
    <div class="rec-card rec-b">
      <h3>Get the {productB.name} if...</h3>
      <ul>
        <li>You own your home and can install a permanent under-sink system</li>
        <li>You need higher capacity for a family or heavy filtered water use</li>
        <li>You want the best RO value under $200 with alkaline remineralization</li>
        <li>You prefer a clean countertop with the system hidden under the sink</li>
      </ul>
      <a href={getAffiliateUrl(productB.asin)} target="_blank" rel="nofollow sponsored noopener" class="btn-primary" style="color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.2)"><span>Check Price on Amazon</span></a>
    </div>
  </div>

  <h2>Frequently Asked Questions</h2>
  <div class="faq-section">
    {faqs.map(faq => (
      <details class="faq-item">
        <summary>{faq.question}</summary>
        <div class="faq-answer">{faq.answer}</div>
      </details>
    ))}
  </div>
</ContentLayout>

<style>
  .verdict-card { text-align:center; padding:1.5rem; background:hsl(var(--muted)/0.3); border:1px solid hsl(var(--border)); border-radius:1rem; margin:1.5rem 0; position:relative; overflow:hidden; }
  .verdict-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; background:linear-gradient(90deg,hsl(var(--primary)),hsl(var(--accent)),hsl(var(--primary))); }
  .winner-badge { display:inline-block; padding:0.375rem 1rem; border-radius:9999px; background:hsl(var(--primary)/0.1); color:hsl(var(--primary)); font-weight:700; font-size:0.8125rem; margin:0.75rem 0 1.5rem; border:1px solid hsl(var(--primary)/0.2); }
  .recommendation-grid { display:grid; grid-template-columns:1fr; gap:1.5rem; margin:1.5rem 0; }
  @media(min-width:768px) { .recommendation-grid { grid-template-columns:1fr 1fr; } }
  .rec-card { padding:1.5rem; border-radius:1rem; border:1px solid hsl(var(--border)); background:hsl(var(--card)); display:flex; flex-direction:column; }
  .rec-card h3 { font-size:1rem; margin-bottom:0.75rem; margin-top:0; color:hsl(var(--primary)); }
  .rec-card ul { padding-left:1.25rem; margin-bottom:1.25rem; }
  .rec-card li { margin-bottom:0.375rem; font-size:0.9375rem; }
  .rec-card > a { margin-top:auto; align-self:flex-start; }
</style>
